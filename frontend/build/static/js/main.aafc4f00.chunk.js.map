{"version":3,"sources":["logo.svg","pages/Login.js","pages/Register.js","pages/Dashboard.js","App.js","index.js"],"names":["App","useState","email","setEmail","password","setPassword","event","preventDefault","fetch","method","headers","body","JSON","stringify","response","json","data","user","localStorage","setItem","alert","window","location","href","style","display","justifyContent","alignItems","height","onSubmit","value","onChange","e","target","type","placeholder","Button","onClick","history","useHistory","name","setName","status","push","axios","require","Dashboard","bookdata","setBooksData","loggedinuser","setUser","populateBooksData","getItem","req","temp","useEffect","token","temploggedinuser","jwt","decode","removeItem","replace","removeBook","id","booksbought","splice","put","temptoken","sign","addBook","TableContainer","component","Paper","Table","TableHead","TableRow","TableCell","align","TableBody","map","row","index","includes","_id","genre","author","price","variant","rowList","getdata","get","forEach","book","path","exact","Login","Register","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.aafc4f00.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import { Button } from '@material-ui/core'\nimport { useState } from 'react'\n\nfunction App() {\n\tconst [email, setEmail] = useState('')\n\tconst [password, setPassword] = useState('')\n\n\tfunction gotoregister() {\n\t\twindow.location.href = \"/register\";\n\t}\n\n\tasync function loginUser(event) {\n\t\tevent.preventDefault()\n\n\t\tconst response = await fetch('/api/login', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\temail,\n\t\t\t\tpassword,\n\t\t\t}),\n\t\t})\n\n\t\tconst data = await response.json()\n\n\t\tif (data.user) {\n\t\t\tlocalStorage.setItem('token', data.user)\n\t\t\talert('Login successful')\n\t\t\twindow.location.href = '/dashboard'\n\t\t} else {\n\t\t\talert('Please check your username and password')\n\t\t}\n\t}\n\n\treturn (\n\t\t<div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh' }}>\n\t\t\t<h1>Login</h1>\n\t\t\t<form onSubmit={loginUser}>\n\t\t\t\t<input\n\t\t\t\t\tvalue={email}\n\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\n\t\t\t\t\ttype=\"email\"\n\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t/>\n\t\t\t\t<br />\n\t\t\t\t<input\n\t\t\t\t\tvalue={password}\n\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t/>\n\t\t\t\t<br />\n\t\t\t\t<input type=\"submit\" value=\"Login\" />\n\t\t\t</form>\n\t\t\t<Button onClick={gotoregister}>Register</Button>\n\t\t</div>\n\t)\n}\n\nexport default App\n","import { useState } from 'react'\nimport { useHistory } from 'react-router-dom'\n\nfunction App() {\n\tconst history = useHistory()\n\n\tconst [name, setName] = useState('')\n\tconst [email, setEmail] = useState('')\n\tconst [password, setPassword] = useState('')\n\n\tasync function registerUser(event) {\n\t\tevent.preventDefault()\n\n\t\tconst response = await fetch('/api/register', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tname,\n\t\t\t\temail,\n\t\t\t\tpassword,\n\t\t\t}),\n\t\t})\n\n\t\tconst data = await response.json()\n\n\t\tif (data.status === 'ok') {\n\t\t\thistory.push('/login')\n\t\t}\n\t}\n\n\treturn (\n\t\t<div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh' }}>\n\t\t\t<h1>Register</h1>\n\t\t\t<form onSubmit={registerUser}>\n\t\t\t\t<input\n\t\t\t\t\tvalue={name}\n\t\t\t\t\tonChange={(e) => setName(e.target.value)}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"Name\"\n\t\t\t\t/>\n\t\t\t\t<br />\n\t\t\t\t<input\n\t\t\t\t\tvalue={email}\n\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\n\t\t\t\t\ttype=\"email\"\n\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t/>\n\t\t\t\t<br />\n\t\t\t\t<input\n\t\t\t\t\tvalue={password}\n\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t/>\n\t\t\t\t<br />\n\t\t\t\t<input type=\"submit\" value=\"Register\" />\n\t\t\t</form>\n\t\t</div>\n\t)\n}\n\nexport default App\n","import React, { useEffect, useState } from 'react'\nimport jwt from 'jsonwebtoken'\nimport { useHistory } from 'react-router-dom'\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from '@material-ui/core/Button';\nconst axios = require('axios');\n\n\n\nconst Dashboard = () => {\n\tconst history = useHistory()\n\tconst [bookdata, setBooksData] = useState([])\n\tconst [loggedinuser, setUser] = useState({})\n\n\tasync function populateBooksData() {\n\t\tconst req = await fetch('/api/books', {\n\t\t\theaders: {\n\t\t\t\t'x-access-token': localStorage.getItem('token'),\n\t\t\t},\n\t\t})\n\t\tconst temp = await req.json()\n\t\t//console.log(\"Books data\", temp);\n\t\tsetBooksData(temp)\n\t}\n\n\tuseEffect(() => {\n\t\tpopulateBooksData()\n\t\tconst token = localStorage.getItem('token')\n\t\tif (token) {\n\t\t\tconst temploggedinuser = jwt.decode(token)\n\t\t\tif (!temploggedinuser) {\n\t\t\t\tlocalStorage.removeItem('token')\n\t\t\t\thistory.replace('/login')\n\t\t\t} else {\n\t\t\t\t//console.log(\"TOKEN\", jwt.decode(token));\n\t\t\t\t//console.log(\"LOGGED IN USR\", temploggedinuser)\n\t\t\t\tpopulateBooksData()\n\t\t\t\tsetUser(temploggedinuser)\n\t\t\t}\n\t\t}\n\t}, [])\n\n\n\n\tconst removeBook = async (id) => {\n\t\tvar booksbought = []\n\t\tbooksbought = loggedinuser.booksbought\n\t\tbooksbought.splice(booksbought, 1)\n\t\tconst req = await axios.put(`/api/user/${loggedinuser.email}`,\n\t\t\t{\n\t\t\t\tbooksbought: booksbought\n\t\t\t})\n\t\tconst token = localStorage.getItem('token')\n\t\tif (token) {\n\t\t\tconst temploggedinuser = jwt.decode(token)\n\t\t\ttemploggedinuser.booksbought = booksbought\n\n\t\t\tlocalStorage.removeItem('token')\n\t\t\tconst temptoken = jwt.sign(\n\t\t\t\ttemploggedinuser,\n\t\t\t\t'secret123'\n\t\t\t)\n\t\t\tlocalStorage.setItem('token', temptoken)\n\t\t\tsetUser(temploggedinuser)\n\t\t}\n\t}\n\n\n\tconst addBook = async (id) => {\n\t\tvar booksbought = []\n\t\tbooksbought = loggedinuser.booksbought\n\t\tbooksbought.push(id)\n\t\tconst req = await axios.put(`/api/user/${loggedinuser.email}`,\n\t\t\t{\n\t\t\t\tbooksbought: booksbought\n\t\t\t})\n\n\t\t//console.log(\"AFTER DATA\", req);\n\t\tconst token = localStorage.getItem('token')\n\t\tif (token) {\n\t\t\tconst temploggedinuser = jwt.decode(token)\n\t\t\ttemploggedinuser.booksbought = booksbought\n\n\t\t\tlocalStorage.removeItem('token')\n\t\t\tconst temptoken = jwt.sign(\n\t\t\t\ttemploggedinuser,\n\t\t\t\t'secret123'\n\t\t\t)\n\t\t\tlocalStorage.setItem('token', temptoken)\n\t\t\tsetUser(temploggedinuser)\n\t\t}\n\t}\n\n\n\treturn (\n\t\t<div>\n\t\t\t<TableContainer component={Paper}>\n\t\t\t\t<Table aria-label=\"simple table\">\n\n\t\t\t\t\t<TableHead>\n\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t<TableCell align=\"center\">S.No</TableCell>\n\t\t\t\t\t\t\t<TableCell align=\"center\">Ttile</TableCell>\n\t\t\t\t\t\t\t<TableCell align=\"center\">Genre</TableCell>\n\t\t\t\t\t\t\t<TableCell align=\"center\">Author</TableCell>\n\t\t\t\t\t\t\t<TableCell align=\"center\">Price&nbsp;($)</TableCell>\n\t\t\t\t\t\t\t<TableCell align=\"center\">Buy</TableCell>\n\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t</TableHead>\n\n\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t{bookdata.map((row, index) => {\n\t\t\t\t\t\t\tif (loggedinuser.booksbought.includes(row._id))\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<TableRow key={index}>\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">{index + 1}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">{row.name}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">{row.genre}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">{row.author.name}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">{row.price ?? 0}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\" ><Button onClick={() => removeBook(row._id)} variant=\"contained\">Remove</Button></TableCell>\n\n\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<TableRow key={index}>\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">{index + 1}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">{row.name}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">{row.genre}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">{row.author.name}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\">{row.price ?? 0}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell align=\"center\" >< Button onClick={() => addBook(row._id)} variant=\"contained\">Add</Button></TableCell>\n\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t)}\n\t\t\t\t\t</TableBody>\n\n\t\t\t\t</Table>\n\t\t\t</TableContainer>\n\t\t</div>\n\t)\n}\n\nexport default Dashboard\n","import logo from './logo.svg';\nimport './App.css';\nimport { useEffect } from 'react'\n\nimport { BrowserRouter, Route } from 'react-router-dom'\nimport Login from './pages/Login'\nimport Register from './pages/Register'\nimport Dashboard from './pages/Dashboard'\n\nconst axios = require('axios');\nconst rowList = [];\n\n\nconst getdata = async () => {\n  const books = await axios.get('/api/books');\n  //console.log(books);\n  books.data.forEach(book => {\n    rowList.push(<tr><td>{book.name}</td></tr>)\n  });\n\n  //console.log(rowList);\n\n};\n\nfunction App() {\n\n  useEffect(() => {\n\n    getdata()\n\n  });\n\n  return (\n\n    <div>\n      <BrowserRouter>\n        <Route path=\"/\" exact component={Login} />\n        <Route path=\"/register\" exact component={Register} />\n        <Route path=\"/dashboard\" exact component={Dashboard} />\n      </BrowserRouter>\n    </div>\n  );\n}\n\n\n\n\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}